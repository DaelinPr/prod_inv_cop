{% extends "layout.html" %}

{% block title %}Кабинеты{% endblock %}

{% block content %}
<h1>Список кабинетов</h1>
<a href="/rooms/add" class="btn btn-success mb-3">Добавить кабинет</a>

<form method="get" class="row g-3 mb-4">
    <div class="col-md-2">
        <input type="text" class="form-control" name="name" placeholder="Название" value="{{ name }}">
    </div>
    <div class="col-md-2">
        <input type="text" class="form-control" name="number" placeholder="Номер" value="{{ number }}">
    </div>
    <div class="col-md-2">
        <input type="text" class="form-control" name="floor" placeholder="Этаж" value="{{ floor }}">
    </div>
    <div class="col-md-2">
        <input type="text" class="form-control" name="teacher" placeholder="Учитель" value="{{ teacher }}">
    </div>
    <div class="col-md-2">
        <input type="number" class="form-control" name="capacity_min" placeholder="Вместимость от" value="{{ capacity_min }}">
    </div>
    <div class="col-md-2">
        <input type="number" class="form-control" name="capacity_max" placeholder="Вместимость до" value="{{ capacity_max }}">
    </div>
    <div class="col-md-2">
        <button type="submit" class="btn btn-primary w-100">Фильтровать</button>
    </div>
    <div class="col-md-2">
        <a href="/rooms" class="btn btn-secondary w-100">Сбросить</a>
    </div>
    <div class="col-md-2">
    <a href="{{ url_for('export_rooms',
                        name=name,
                        number=number,
                        floor=floor,
                        teacher=teacher,
                        capacity_min=capacity_min,
                        capacity_max=capacity_max) }}"
       class="btn btn-success w-100">Экспорт в Excel</a>
</div>

</form>

<table class="table table-striped table-bordered">
    <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Название</th>
            <th>Номер</th>
            <th>Этаж</th>
            <th>Учитель</th>
            <th>Вместимость</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for room in rooms %}
        <tr>
            <td>{{ room.id }}</td>
            <td>{{ room.name }}</td>
            <td>{{ room.number }}</td>
            <td>{{ room.floor }}</td>
            <td>{{ room.teacher }}</td>
            <td>{{ room.capacity }}</td>
            <td>
                <a href="/rooms/{{ room.id }}" class="btn btn-info btn-sm">Просмотреть</a>
                <a href="/rooms/{{ room.id }}/edit" class="btn btn-warning btn-sm">Редактировать</a>
                <a href="/rooms/{{ room.id }}/delete" class="btn btn-danger btn-sm">Удалить</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
